schema: '2.0'
stages:
  clean_raw:
    cmd: python -m mlops.dataset --task clean --input 
      data/raw/work_absenteeism_modified.csv --output 
      data/interim/absenteeism_clean.parquet
    deps:
    - path: data/raw/work_absenteeism_modified.csv
      hash: md5
      md5: 96c318341d1846f567be7127f52d03e1
      size: 79517
    - path: mlops/dataset.py
      hash: md5
      md5: 8a41b7c9003f46c11c8c8a8904899b89
      size: 7483
    params:
      params.yaml:
        clean.drop_columns:
        - ID
        - mixed_type_col
        clean.outliers.method: iqr
        clean.outliers.z_thresh: 3.0
    outs:
    - path: data/interim/absenteeism_clean.parquet
      hash: md5
      md5: 94adc8c258881c1fc4c8eed6800da097
      size: 15636
  features:
    cmd: python -m mlops.features --task build --input 
      data/interim/absenteeism_clean.parquet --output 
      data/processed/absenteeism_features.parquet
    deps:
    - path: data/interim/absenteeism_clean.parquet
      hash: md5
      md5: 94adc8c258881c1fc4c8eed6800da097
      size: 15636
    - path: mlops/features.py
      hash: md5
      md5: 6ab0bdea036cc8f24e543ab4ef15fd93
      size: 5576
    params:
      params.yaml:
        features.drop_low_variance: true
        features.encode: onehot
        features.scale: standard
        features.variance_thresh: 0.0
    outs:
    - path: data/processed/absenteeism_features.parquet
      hash: md5
      md5: 15666c371884a448107145065b7fba98
      size: 64362
  split:
    cmd: python -m mlops.dataset --task split --input 
      data/processed/absenteeism_features.parquet --train 
      data/processed/train.parquet --test data/processed/test.parquet
    deps:
    - path: data/processed/absenteeism_features.parquet
      hash: md5
      md5: 15666c371884a448107145065b7fba98
      size: 64362
    - path: mlops/dataset.py
      hash: md5
      md5: 8a41b7c9003f46c11c8c8a8904899b89
      size: 7483
    params:
      params.yaml:
        split.random_state: 42
        split.stratify: true
        split.test_size: 0.2
    outs:
    - path: data/processed/test.parquet
      hash: md5
      md5: 40ad1d934d7733aa1ddda3eb64b63235
      size: 60955
    - path: data/processed/train.parquet
      hash: md5
      md5: 3471fc9a86f9f83fcc8f4a2510c0cadf
      size: 64656
  train_model:
    cmd: python -m mlops.modeling.train --train data/processed/train.parquet 
      --test data/processed/test.parquet --model-out models/model.pkl 
      --metrics-out metrics.json
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: 40ad1d934d7733aa1ddda3eb64b63235
      size: 60955
    - path: data/processed/train.parquet
      hash: md5
      md5: 3471fc9a86f9f83fcc8f4a2510c0cadf
      size: 64656
    - path: mlops/modeling/train.py
      hash: md5
      md5: 05162cbad088135e04e8393c739ed7ed
      size: 2659
    params:
      params.yaml:
        mlflow.experiment: absenteeism-baseline
        mlflow.tracking_uri: local
        model.alg: logreg
        model.params:
          max_iter: 1000
    outs:
    - path: metrics.json
      hash: md5
      md5: 129a7c741155cc57b4b7043fc29471b3
      size: 73
    - path: models/model.pkl
      hash: md5
      md5: 508fe4b087200b14b53ace7695e43bfc
      size: 3599
