schema: '2.0'
stages:
  clean_raw:
    cmd: python -m mlops.dataset --task clean --input 
      data/raw/work_absenteeism_modified.csv --output 
      data/interim/absenteeism_clean.parquet
    deps:
    - path: data/raw/work_absenteeism_modified.csv
      hash: md5
      md5: 96c318341d1846f567be7127f52d03e1
      size: 79517
    - path: mlops/dataset.py
      hash: md5
      md5: f873371995c1403c023be3a74bd36e84
      size: 7481
    params:
      params.yaml:
        clean.drop_columns:
        - ID
        - mixed_type_col
        clean.outliers.method: iqr
        clean.outliers.z_thresh: 3.0
    outs:
    - path: data/interim/absenteeism_clean.parquet
      hash: md5
      md5: 94adc8c258881c1fc4c8eed6800da097
      size: 15636
  features:
    cmd: python -m mlops.features --task build --input 
      data/interim/absenteeism_clean.parquet --output 
      data/processed/absenteeism_features.parquet
    deps:
    - path: data/interim/absenteeism_clean.parquet
      hash: md5
      md5: 94adc8c258881c1fc4c8eed6800da097
      size: 15636
    - path: mlops/features.py
      hash: md5
      md5: bef1cf1e0c5a23ae43ea4ac694e3c929
      size: 3887
    params:
      params.yaml:
        features.drop_low_variance: true
        features.encode: onehot
        features.scale: standard
        features.variance_thresh: 0.0
    outs:
    - path: data/processed/absenteeism_features.parquet
      hash: md5
      md5: 26a2d61e5ac4915a73f46f3db4f34af9
      size: 56670
  split:
    cmd: python -m mlops.dataset --task split --input 
      data/processed/absenteeism_features.parquet --train 
      data/processed/train.parquet --test data/processed/test.parquet
    deps:
    - path: data/processed/absenteeism_features.parquet
      hash: md5
      md5: 26a2d61e5ac4915a73f46f3db4f34af9
      size: 56670
    - path: mlops/dataset.py
      hash: md5
      md5: f873371995c1403c023be3a74bd36e84
      size: 7481
    params:
      params.yaml:
        split.random_state: 42
        split.stratify: true
        split.test_size: 0.2
    outs:
    - path: data/processed/test.parquet
      hash: md5
      md5: 4a3b1fcdfb33a8523e1a4d85ee95478b
      size: 53598
    - path: data/processed/train.parquet
      hash: md5
      md5: c0152f27303334bd325dd78b76c23fef
      size: 57063
  train_model:
    cmd: python -m mlops.modeling.train --train data/processed/train.parquet 
      --test data/processed/test.parquet --model-out models/model.pkl 
      --metrics-out metrics.json
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: 4a3b1fcdfb33a8523e1a4d85ee95478b
      size: 53598
    - path: data/processed/train.parquet
      hash: md5
      md5: c0152f27303334bd325dd78b76c23fef
      size: 57063
    - path: mlops/modeling/train.py
      hash: md5
      md5: 05162cbad088135e04e8393c739ed7ed
      size: 2659
    params:
      params.yaml:
        mlflow.experiment: absenteeism-baseline
        mlflow.tracking_uri: local
        model.alg: logreg
        model.params:
          max_iter: 1000
    outs:
    - path: metrics.json
      hash: md5
      md5: 129a7c741155cc57b4b7043fc29471b3
      size: 73
    - path: models/model.pkl
      hash: md5
      md5: 5ad366bcc7507600ceb0ec8300855a39
      size: 3279
