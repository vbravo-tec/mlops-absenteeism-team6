schema: '2.0'
stages:
  clean_raw:
    cmd: python -m mlops.dataset --task clean --input 
      data/raw/work_absenteeism_modified.csv --output 
      data/interim/absenteeism_clean.parquet
    deps:
    - path: data/raw/work_absenteeism_modified.csv
      hash: md5
      md5: 96c318341d1846f567be7127f52d03e1
      size: 79517
    - path: mlops/dataset.py
      hash: md5
      md5: f873371995c1403c023be3a74bd36e84
      size: 7481
    - path: params.yaml
      hash: md5
      md5: de83a293102d80f66350dfd73049deb9
      size: 4206
    params:
      params.yaml:
        clean.drop_columns:
        - ID
        - mixed_type_col
        clean.outliers.method: iqr
        clean.outliers.z_thresh: 3.0
    outs:
    - path: data/interim/absenteeism_clean.parquet
      hash: md5
      md5: b699e83e55da98212c4f5099c4c0ea65
      size: 15636
  features:
    cmd: python -m mlops.features --task build --input 
      data/interim/absenteeism_clean.parquet --output 
      data/processed/absenteeism_features.parquet
    deps:
    - path: data/interim/absenteeism_clean.parquet
      hash: md5
      md5: b699e83e55da98212c4f5099c4c0ea65
      size: 15636
    - path: mlops/features.py
      hash: md5
      md5: 48a7c3919e41b7c2f7fa5bd0f58e748f
      size: 3883
    - path: params.yaml
      hash: md5
      md5: de83a293102d80f66350dfd73049deb9
      size: 4206
    params:
      params.yaml:
        features.drop_low_variance: true
        features.encode: onehot
        features.scale: standard
        features.variance_thresh: 0.0
    outs:
    - path: data/processed/absenteeism_features.parquet
      hash: md5
      md5: 1fc3d8133614b706d13890cc9541031e
      size: 56670
  split:
    cmd: python -m mlops.dataset --task split --input 
      data/processed/absenteeism_features.parquet --train 
      data/processed/train.parquet --test data/processed/test.parquet
    deps:
    - path: data/processed/absenteeism_features.parquet
      hash: md5
      md5: 1fc3d8133614b706d13890cc9541031e
      size: 56670
    - path: mlops/dataset.py
      hash: md5
      md5: f873371995c1403c023be3a74bd36e84
      size: 7481
    - path: params.yaml
      hash: md5
      md5: de83a293102d80f66350dfd73049deb9
      size: 4206
    params:
      params.yaml:
        split.random_state: 42
        split.stratify: true
        split.test_size: 0.2
    outs:
    - path: data/processed/test.parquet
      hash: md5
      md5: e7e38a6bc1060e43874ddc8a34539b6c
      size: 53598
    - path: data/processed/train.parquet
      hash: md5
      md5: 8ce5c415e73ef72f65e5f5c3ba14560c
      size: 57063
  train_model:
    cmd: python -m mlops.modeling.train --train data/processed/train.parquet 
      --test data/processed/test.parquet --model-out models/model.pkl 
      --metrics-out metrics.json
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: e7e38a6bc1060e43874ddc8a34539b6c
      size: 53598
    - path: data/processed/train.parquet
      hash: md5
      md5: 8ce5c415e73ef72f65e5f5c3ba14560c
      size: 57063
    - path: mlops/modeling/train.py
      hash: md5
      md5: 05162cbad088135e04e8393c739ed7ed
      size: 2659
    - path: params.yaml
      hash: md5
      md5: de83a293102d80f66350dfd73049deb9
      size: 4206
    params:
      params.yaml:
        mlflow.experiment: absenteeism-baseline
        mlflow.tracking_uri: local
        model.alg: logreg
        model.params:
          max_iter: 1000
    outs:
    - path: metrics.json
      hash: md5
      md5: 129a7c741155cc57b4b7043fc29471b3
      size: 73
    - path: models/model.pkl
      hash: md5
      md5: 156f6ee77b0de40c317347e6e84375aa
      size: 3631
